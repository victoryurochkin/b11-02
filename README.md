# Домашнее задание к занятию "`«Кеширование Redis/memcached»`" - `Юрочкин В.А.`

---

### Задание 1. Кеширование
Приведите примеры проблем, которые может решить кеширование.

Приведите ответ в свободной форме.

`Ответ:`

`Кеширование применяется для повышения производительности, отказоустойчивости и эффективности использования ресурсов. Ниже приведены типовые проблемы, которые решаются с его помощью.

Высокая нагрузка на серверы и базы данных
При большом количестве однотипных запросов (например, к БД или внешнему API) кеширование позволяет отдавать уже готовый результат, снижая нагрузку на CPU, диск и сеть.

Медленное время отклика приложений
Хранение часто запрашиваемых данных в оперативной памяти (Redis, Memcached) существенно сокращает время ответа по сравнению с обращением к диску или БД.

Избыточное количество повторяющихся вычислений
Результаты ресурсоёмких операций (агрегации, отчёты, сложные расчёты) можно сохранить в кеше и не пересчитывать их при каждом запросе.

Ограничения и задержки при работе с внешними сервисами
Кеширование ответов внешних API помогает:

снизить количество запросов к сторонним системам,

избежать лимитов (rate limit),

повысить устойчивость при временной недоступности сервиса.

Пиковые нагрузки и “шторма” запросов
Кеш защищает систему от резких всплесков трафика (например, при акции или публикации новости), позволяя обслуживать множество клиентов без деградации производительности.

Избыточная нагрузка на файловую систему
Кеширование статического контента (изображения, CSS, JS) снижает количество операций чтения с диска и ускоряет загрузку страниц.

Неравномерное распределение нагрузки в распределённых системах
Использование локальных и распределённых кешей уменьшает сетевые взаимодействия между сервисами и повышает масштабируемость микросервисной архитектуры.

Повышенные задержки в сетевых соединениях
Кеш на стороне клиента или CDN позволяет сократить сетевой путь до данных и улучшить пользовательский опыт, особенно для географически распределённых пользователей.`

---

### Задание 2. Memcached

Установите и запустите memcached.

Приведите скриншот systemctl status memcached, где будет видно, что memcached запущен.

`Ответ:`

1. Ставим пакет

```
sudo apt update
sudo apt install -y memcached
```

2. Проверка и запуск сервиса

```
sudo systemctl enable memcached
sudo systemctl start memcached

```

3. Проверка статуса сервиса

```
systemctl status memcached

```

<img width="1459" height="1031" alt="image" src="https://github.com/user-attachments/assets/11767506-b512-4f70-a1bb-6083a00cdef3" />

---

### Задание 3 Удаление по TTL в Memcached

Запишите в memcached несколько ключей с любыми именами и значениями, для которых выставлен TTL 5.

Приведите скриншот, на котором видно, что спустя 5 секунд ключи удалились из базы.

`Ответ:`

Выполним команду:

```
( printf "set key1 0 5 5\r\nhello\r\nset key2 0 5 5\r\nworld\r\nset key3 0 5 4\r\ntest\r\nget key1\r\nget key2\r\nget key3\r\n";
  sleep 6;
  printf "get key1\r\nget key2\r\nget key3\r\n" ) | nc 127.0.0.1 11211

```

<img width="1538" height="482" alt="image" src="https://github.com/user-attachments/assets/e31da33b-123b-43d8-81f6-b85c3bc3cf12" />

Что делает команда:

Команда имитирует клиента Memcached и в одном вызове демонстрирует работу TTL (time-to-live): запись ключей, чтение сразу и чтение после истечения TTL.

записывает ключи в Memcached с TTL = 5 секунд

сразу читает их (ключи есть)

ждёт 6 секунд

читает снова (ключей уже нет)

Тем самым наглядно доказывает удаление данных по TTL.

---

### Задание 4. Запись данных в Redis

Запишите в Redis несколько ключей с любыми именами и значениями.

Через redis-cli достаньте все записанные ключи и значения из базы, приведите скриншот этой операции.

`Ответ:`

Ставим Redis

```
sudo apt update
sudo apt install -y redis-server
sudo systemctl enable redis-server
sudo systemctl start redis-server
```

1. Подключение к Redis

```
redis-cli
```

2. Запись нескольких ключей и значений

```
SET key1 "hello"
SET key2 "world"
SET key3 "test"
```

<img width="475" height="213" alt="image" src="https://github.com/user-attachments/assets/7ce78743-3693-4991-8fcd-b9ff86265820" />

3. Получение всех ключей из базы

```
KEYS *
```

<img width="350" height="133" alt="image" src="https://github.com/user-attachments/assets/7f56c68b-76cc-4e50-9b11-678df05d3e22" />

4. Получение значений всех ключей

```
GET key1
GET key2
GET key3
```

<img width="376" height="176" alt="image" src="https://github.com/user-attachments/assets/0012fd14-f99e-4170-bb36-bbba11b5f9e5" />

